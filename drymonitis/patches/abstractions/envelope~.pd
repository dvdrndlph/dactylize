#N canvas 183 73 497 258 10;
#N canvas 282 89 619 621 envelope1 0;
#X obj 60 359 ggee/envgen 100 60 1 0  ;
#X obj 195 427 list prepend set;
#X obj 195 449 list trim;
#X msg 195 503 0 464.36 1 342.16 0.716667 1246.44 0.566667 391.04 0
;
#X msg 194 310 dump;
#X obj 207 474 loadbang;
#X obj 58 191 threshold~ 0 10 0 10;
#X obj 58 98 r~ trig_sig1;
#X obj 58 432 line~;
#X obj 195 198 r env1_dur;
#X obj 195 220 map 0 1023 200 3000;
#X obj 195 242 i;
#X obj 195 264 change;
#X msg 195 286 duration \$1;
#X obj 58 457 outlet~;
#X obj 145 35 r env1_trig;
#X obj 398 37 r mtx_msg;
#X obj 432 81 unpack;
#X obj 398 59 list split 2;
#X obj 432 183 spigot;
#X obj 432 113 ==;
#X obj 478 96 r \$0-first_inlet;
#X obj 432 206 sel 0;
#X obj 432 228 del 20;
#X msg 432 250 0;
#X obj 432 277 switch~;
#X obj 432 158 f;
#X obj 432 135 t b f;
#X obj 145 129 pack;
#X msg 145 152 set \$1 10 \$2 10;
#X obj 166 85 r env1_rest;
#X obj 145 57 map 0 1023 -1 1;
#X obj 166 107 map 0 1023 -1 1;
#X connect 0 0 8 0;
#X connect 0 1 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 3 0;
#X connect 6 0 0 0;
#X connect 6 1 0 0;
#X connect 7 0 6 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 0 0;
#X connect 15 0 31 0;
#X connect 16 0 18 0;
#X connect 17 0 20 0;
#X connect 17 1 26 1;
#X connect 18 1 17 0;
#X connect 19 0 22 0;
#X connect 20 0 27 0;
#X connect 21 0 20 1;
#X connect 22 0 23 0;
#X connect 22 1 25 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 26 0 19 0;
#X connect 27 0 26 0;
#X connect 27 1 19 1;
#X connect 28 0 29 0;
#X connect 29 0 6 0;
#X connect 30 0 32 0;
#X connect 31 0 28 0;
#X connect 32 0 28 1;
#X restore 82 79 pd envelope1;
#X obj 82 101 outlet~;
#X obj 172 101 outlet~;
#N canvas 373 103 606 572 envelope2 0;
#X obj 70 364 ggee/envgen 100 60 1 0  ;
#X obj 215 432 list prepend set;
#X obj 215 454 list trim;
#X msg 215 508 0 35 0.55 22 1 24 0.783333 19 0;
#X msg 218 302 dump;
#X obj 227 479 loadbang;
#X obj 68 217 threshold~ 0 10 0 10;
#X obj 68 437 line~;
#X obj 218 215 map 0 1023 200 3000;
#X obj 218 237 i;
#X obj 218 259 change;
#X msg 218 281 duration \$1;
#X obj 68 459 outlet~;
#X obj 68 124 r~ trig_sig2;
#X obj 185 35 r env2_trig;
#X obj 218 193 r env2_dur;
#X obj 378 47 r mtx_msg;
#X obj 412 91 unpack;
#X obj 378 69 list split 2;
#X obj 412 193 spigot;
#X obj 412 123 ==;
#X obj 462 84 r \$0-first_inlet;
#X obj 412 216 sel 0;
#X obj 412 238 del 20;
#X msg 412 260 0;
#X obj 412 288 switch~;
#X obj 412 168 f;
#X obj 412 145 t b f;
#X obj 462 106 + 1;
#X obj 185 131 pack;
#X msg 185 155 set \$1 10 \$2 10;
#X obj 206 85 r env2_rest;
#X obj 185 57 map 0 1023 -1 1;
#X obj 206 107 map 0 1023 -1 1;
#X connect 0 0 7 0;
#X connect 0 1 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 3 0;
#X connect 6 0 0 0;
#X connect 6 1 0 0;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X connect 13 0 6 0;
#X connect 14 0 32 0;
#X connect 15 0 8 0;
#X connect 16 0 18 0;
#X connect 17 0 20 0;
#X connect 17 1 26 1;
#X connect 18 1 17 0;
#X connect 19 0 22 0;
#X connect 20 0 27 0;
#X connect 21 0 28 0;
#X connect 22 0 23 0;
#X connect 22 1 25 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 26 0 19 0;
#X connect 27 0 26 0;
#X connect 27 1 19 1;
#X connect 28 0 20 1;
#X connect 29 0 30 0;
#X connect 30 0 6 0;
#X connect 31 0 33 0;
#X connect 32 0 29 0;
#X connect 33 0 29 1;
#X restore 172 79 pd envelope2;
#X obj 284 101 sel 0;
#X obj 284 123 del 20;
#X msg 284 168 0;
#X obj 284 190 switch~;
#N canvas 396 54 618 528 get_inlet_switch 0;
#X obj 367 70 loadbang;
#X obj 367 92 \$1;
#X obj 367 114 s \$0-first_inlet;
#X obj 33 68 r mtx_msg;
#X obj 33 90 list split 2;
#X obj 67 116 unpack;
#X obj 108 155 r \$0-first_inlet;
#X obj 67 282 f;
#X obj 108 177 t f f;
#X obj 67 194 >=;
#X obj 120 221 <=;
#X obj 67 238 &&;
#X obj 67 260 t b f;
#X obj 67 304 spigot;
#X obj 67 326 * 2;
#X obj 67 348 - 1;
#X obj 67 370 +;
#X obj 67 392 clip 0 100;
#X obj 67 437 outlet;
#X text 146 221 check if an outlet of this module (inlet for the matrix)
is being connected or disconnected;
#X text 98 371 accumulate connections to determine [switch~] state
;
#X obj 67 138 t f f;
#X obj 135 199 + 3;
#X obj 67 414 t f f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 1 5 0;
#X connect 5 0 21 0;
#X connect 5 1 7 1;
#X connect 6 0 8 0;
#X connect 7 0 13 0;
#X connect 8 0 9 1;
#X connect 8 1 22 0;
#X connect 9 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 12 0;
#X connect 12 0 7 0;
#X connect 12 1 13 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 23 0;
#X connect 21 0 9 0;
#X connect 21 1 10 0;
#X connect 22 0 10 1;
#X connect 23 0 18 0;
#X connect 23 1 16 1;
#X restore 284 56 pd get_inlet_switch;
#X obj 284 78 t f f;
#X obj 284 145 spigot;
#X obj 339 128 == 0;
#X connect 0 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 1 7 0;
#X connect 5 0 10 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 9 0 4 0;
#X connect 9 1 11 0;
#X connect 10 0 6 0;
#X connect 11 0 10 1;
